---
title: "Preliminary Analysis - Research in Health Economics"
author: "Ammarah Ahmed"
date: ""
header-includes:
  - \usepackage{booktabs}
output: 
  bookdown::pdf_document2:
    fig_caption: yes
    toc: false
---

```{r setup, include=FALSE}
pacman::p_load(Matching, tidyverse, ggplot2, dplyr, lubridate, stringr, readxl, readr, data.table, gdata, scales, kableExtra, modelsummary, fixest, imputeTS, rdrobust, rddensity)
```

```{r, warning = FALSE, echo = FALSE, message = FALSE}
knitr::opts_chunk$set(echo = FALSE, message=FALSE, warning = FALSE)
```

```{r}
load("finalproject.Rdata")
```

# Data

\indent This project is looking into the effect of health insurance on health outcomes to answer the question, "does health insurance improve health?" It is using annual survey data on general health trends in USA from the Behavioral Factor Surveillance System (BFRS). In particular, it is using the self-reported health status (GENHLTH) as an indicator of health with a rating of '1' corresponding to 'excellent health' and '5' to 'poor health' while a rating of '7' indicated people who were unsure of their health status. It is using data from 2011, 2012 and 2013 as years before Medicaid expansion and data on years 2014-2019 for years after expansion. 
\indent For insurance data, it is using data from United States Census Bureau for the years 2012-2019 on the different types health-care coverage being used by the population. It is also using data from the Kaiser Family Foundation to determine the states which have expanded Medicaid and which have not to better compare the impact of Medicaid expansion on health. 

# Data Analysis 

```{r, include=FALSE}
sum_stat
```

```{r table1, include=T, eval=T, echo=F}
options(knitr.kable.NA = 0)
knitr::kable(sum_stat, 
             col.names=c("Observations", "Mean", "Standard Deviation", "Minimum", "Maximum"),
             format.args = list(big.mark=","), 
             caption = "Insurance Plan Summary Statistics",
             booktabs = TRUE) %>%
  kable_styling(latex_options = c("hold_position"))
```

\indent Table \@ref(tab:table1) includes the summary statistics of the data on insurance distribution in the US. It shows that a majority of the population is covered under Employer-Provided Insurance with a mean of `r table1$mean[1]` and the second-most coverage is provided by Medicaid with a mean of `r sum_stat$mean[3]` over the years and across all states. 

\indent Table \@ref(tab:table2) is showing the average health status rating for a state with Medicaid expansion and without. The average self-reported health status rating is `r round(health_stats$avg_rating[1], 3)` with Medicaid expansion and `r round(health_stats$avg_rating[2], 3)` without Medicaid expansion. As the mean rating is lower by `r round(health_stats$avg_rating[2]-health_stats$avg_rating[1], 3)` for states with Medicaid expansion, it can be understood that Medicaid expansion corresponds to better self-reported health status.  

```{r, include=FALSE}
health_stats
```

```{r table2, include=T, eval=T, echo=F}
options(knitr.kable.NA = 0)
knitr::kable(health_stats, 
             col.names=c("Medicaid Expansion", "Observations","Average Health Status", 
                         "Standard Deviation", "Lower Interval", "Upper Interval"),
             format.args = list(big.mark=","), 
             caption = "Average Health Status Ratings",
             booktabs = TRUE) %>%
  kable_styling(latex_options = c("hold_position"))
```

```{r fig1, include=T, eval=T, echo=F, fig.cap="Share of Uninsured Population"}
fig1
```

```{r fig2, include=T, eval=T, echo=F, fig.cap="Share of Insurance Distribution"}
fig2
```

```{r fig3, include=T, eval=T, echo=F, fig.cap="Self Reported Health Status and Medicaid Expansion"}
fig3
```

```{r fig4, include=T, eval=T, echo=F, fig.cap="Self Reported Health Status and Health Care Coverage"}
fig4
```

